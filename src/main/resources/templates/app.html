<!DOCTYPE html>
<html lang="en" xmlns:th="http://www.thymeleaf.org" class="w-screen h-screen">
<head th:replace="partials/head :: header-links(app)"></head>
<body class="w-screen h-screen">
<nav th:replace="partials/nav :: navbar"></nav>

<div class=" w-full text-lg py-2 px-2 border-b border-black" id="tab">
	<div class="w-full space-x-1 md:space-x-10 lg:space-x-20 max-w-3xl mx-auto flex items-center justify-center">
		<button id="application" class="px-6 py-2 dark:bg-opacity-20 active tab">Application</button>
		<button id="notes" class="px-6 py-2 dark:bg-opacity-20 tab">Notes</button>
		<button id="poc" class="px-6 py-2 dark:bg-opacity-20 tab">POC's</button>
	</div>
</div>
<div class="application tab-item grid grid-cols-2 h-96 px-12 py-8">
	<div class="md:col-span-1 col-span-full flex flex-col justify-around">
		<div>
			<div class="text-3xl font-light" th:text=" ${jobApplication.title}"></div>
			<div class="text-xl">Company:
				<p th:text=" ${jobApplication.company}"></p>
			</div>
		</div>
		<div class="font-semibold">date applied:
			<p class="font-light" th:text=" ${jobApplication.dateApplied.toString().substring(0, jobApplication.dateApplied.toString().indexOf(' ')).replace('-', '/')}"></p>
		</div>
		<div class="font-semibold">Post#/Id:
			<p class="font-light" th:text=" ${jobApplication.postingId}"></p>
		</div >
		<div class="font-semibold">referred by:
			<p class="font-light" th:text=" ${jobApplication.referredBy}"></p>
		</div>
		<div class="font-semibold">Description:
			<p class="font-light" th:text=" ${jobApplication.description}"></p>
		</div>
	</div>
	<div class="md:col-span-1 col-span-full flex flex-col justify-around">
		<p th:text=" ${jobApplication.location}"></p>
		<div>Salary:
			<p th:text=" ${jobApplication.salary}"></p>
		</div>
		<div>Position type:
			<p th:text=" ${jobApplication.positionType}"></p>
		</div>
		<div>resume used:</div>
		<p th:if="${jobApplication.resume != null}" th:text=" ${jobApplication.resume.title}"></p>
		<div>Current stage:
			<p th:text=" ${stage.stage}"></p>
			<p th:text=" ${date.toString().substring(0, date.toString().indexOf(' ')).replace('-', '/')}"></p>
		</div>
	</div>
</div>


<div class="grid grid-cols-2 h-96 poc tab-item hidden">

	<div class="col-span-full md:col-span-1">
		<div class="py-2 px-4">
			<div th:each="contact : ${jobApplication.poc}" class="grid grid-cols-4 h-40 border px-4 border-black py-2">
				<div class="col-span-full lg:col-span-2 flex flex-col justify-evenly items-center lg:items-end px-5">
					<div>Title:
						<p th:text=" ${contact.position}"></p>
					</div>
					<div>Name:
						<p th:text=" ${contact.firstName + ' ' + contact.lastName}"></p>
					</div>
				</div>
				<div class="col-span-full lg:col-span-2 flex flex-col justify-evenly items-center lg:items-start px-5">
					<div>Email:
						<p th:text=" ${contact.email}"></p>
					</div>
					<div>Phone:
						<p th:text=" ${contact.phoneNumber}"></p>
					</div>
				</div>
				<div class="col-span-full flex justify-evenly">
					<form th:action="@{|/poc/edit/${contact.id}|}" class=" inline-block">
						<input type="hidden" name="application" th:value="${jobApplication.id}">
						<button>edit</button>
					</form>
					<form th:action="@{|/poc/delete/${contact.id}|}" method="post" class=" inline-block">
						<input type="hidden" name="application" th:value="${jobApplication.id}">
						<button>remove</button>
					</form>
				</div>
			</div>
		</div>
	</div>

	<form th:action="@{/poc}" method="post" th:object="${poc}" class="inline-flex flex-col justify-evenly col-span-full md:col-span-1 px-4 lg:pl-0">
		<label for="email" ></label>
		<input id="email" type="email" th:field="*{email}" class="mt-3 md:mt-0 appearance-none rounded-md w-full relative block mx-auto px-4 py-4 border border-gray-300 placeholder-gray-500 text-gray-900 focus:outline-none focus:ring-indigo-500 focus:border-indigo-500 focus:z-10 sm:text-sm" placeholder="Email" required>
		<label for="firstName"></label>
		<input id="firstName" type="text" th:field="*{firstName}" class="mt-3 md:mt-0 appearance-none rounded-md relative block w-full mx-auto px-4 py-4 border border-gray-300 placeholder-gray-500 text-gray-900 focus:outline-none focus:ring-indigo-500 focus:border-indigo-500 focus:z-10 sm:text-sm" placeholder="First Name" required>
		<label for="lastName"></label>
		<input id="lastName" type="text" th:field="*{lastName}" class="mt-3 md:mt-0 appearance-none rounded-md relative block w-full mx-auto px-4 py-4 border border-gray-300 placeholder-gray-500 text-gray-900 focus:outline-none focus:ring-indigo-500 focus:border-indigo-500 focus:z-10 sm:text-sm" placeholder="Last Name">
		<label for="phone"></label>
		<input id="phone" type="tel" th:field="*{phoneNumber}" class="mt-3 md:mt-0 appearance-none rounded-md relative block w-full mx-auto px-4 py-4 border border-gray-300 placeholder-gray-500 text-gray-900 focus:outline-none focus:ring-indigo-500 focus:border-indigo-500 focus:z-10 sm:text-sm" placeholder="Phone Number">
		<label for="position"></label>
		<input id="position" type="text" th:field="*{position}" class="mt-3 md:mt-0 appearance-none rounded-md relative block w-full mx-auto px-4 py-4 border border-gray-300 placeholder-gray-500 text-gray-900 focus:outline-none focus:ring-indigo-500 focus:border-indigo-500 focus:z-10 sm:text-sm" placeholder="Position" required>
		<input type="hidden" name="application" th:value="${jobApplication.id}">
		<button class=" px=6 py-2 bg-edit rounded-full text-white mt-3">Add</button>
	</form>


</div>
<div class="hidden notes grid grid-cols-2 h-96 tab-item hidden">
	<div class="py-1 px-4 md:col-span-1 col-span-full">
		<div th:each="note : ${jobApplication.note}">
			<div class="shadow-md transition-all duration-300 rounded hover:shadow-2xl">
				<p>note:</p>
				<p th:text=" ${note.body}"></p>
				<p>Created at:</p>
				<p th:text=" ${note.createdAt}"></p>
				<form th:action="@{|/notes/delete/${note.id}|}" method="post">
					<input type="hidden" name="application" th:value="${jobApplication.id}">
					<button>remove</button>
				</form>
				<a th:href="@{|/note/${note.id}|}">Edit note</a>
			</div>
		</div>
	</div>
	<form th:action="@{/notes}" method="post" th:object="${note}" class="md:col-span-1">
		<label for="note">Note:</label>
		<input type="text" id="note" th:field="*{body}" placeholder="note">
		<input type="hidden" name="application" th:value="${jobApplication.id}">
		<button type="submit" class="group relative w-full flex justify-center py-2 px-4 border border-transparent text-sm font-medium rounded-md text-white bg-indigo-600 hover:bg-indigo-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500">
			<span class="absolute left-0 inset-y-0 flex items-center pl-3">
				<!-- Heroicon name: solid/lock-closed -->
				<svg class="h-5 w-5 text-indigo-500 group-hover:text-indigo-400" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20" fill="currentColor" aria-hidden="true">
					<path fill-rule="evenodd" d="M5 9V7a5 5 0 0110 0v2a2 2 0 012 2v5a2 2 0 01-2 2H5a2 2 0 01-2-2v-5a2 2 0 012-2zm8-2v2H7V7a3 3 0 016 0z" clip-rule="evenodd" />
				</svg>
			</span>
			Make note
		</button>
	</form>
</div>


<div th:replace="partials/scripts :: assets"></div>
</body>
</html>